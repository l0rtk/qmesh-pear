# qvac-lib-logging

`qvac-lib-logging` wraps any logger you supply (e.g., Pino, Bunyan, console) and normalizes the interface.

## Installation

```bash
npm install @tetherto/qvac-lib-logging
```

## Usage

### Import

```js
// ES Modules
import QvacLogger from '@tetherto/qvac-lib-logging'

// CommonJS
const QvacLogger = require('@tetherto/qvac-lib-logging')
```

### Create a Logger Wrapper

```js
// Wrap an existing logger instance:
const log = new QvacLogger(myLogger)
```

- **With a provided logger**:
    1. If `logger.getLevel()` exists, its return value (case-insensitive) is used.
    2. Else if `logger.level()` exists, its return (case-insensitive) is used.
    3. Else if `logger.level` is a string, it’s used (case-insensitive).
    4. If none yield a valid level, falls back to `DEFAULT_LEVEL` (`"info"`).
- **Without a logger**:
    - The wrapper starts in `OFF` mode and silences all messages.

### Log Levels

Constants available on `QvacLogger.LOG_LEVELS`:

```js
console.log(QvacLogger.LOG_LEVELS)
// {
//   OFF:   'off',
//   ERROR: 'error',
//   WARN:  'warn',
//   INFO:  'info',
//   DEBUG: 'debug'
// }
```

### Logging Methods

- `log.error(...args)`
- `log.warn(...args)`
- `log.info(...args)`
- `log.debug(...args)`

Each method forwards to the corresponding function on the wrapped logger only if the message’s level is at‑or‑above the
active threshold.

## Quickstart Example

```js
import pino from 'pino'
import QvacLogger from '@tetherto/qvac-lib-logging'

const myPino = pino({level: 'warn'})
const log = new QvacLogger(myPino)

console.log(log.getLevel())    // 'warn'
log.info('Info here')          // skipped
log.error('Critical!')         // forwarded to pino.error
```

## SDK Integration Example

```js
import Qvac from '@tetherto/qvac-sdk'
import QvacLogger from '@tetherto/qvac-lib-logging'
import bunyan from 'bunyan'

const debugLogger = bunyan.createLogger({
  name: 'debug-logger',
  level: 'debug',
})
const log = new QvacLogger(debugLogger)

const qvac = new Qvac({logger: log})
await qvac.start()
```

## Testing

Run unit tests with:

```bash
npm test
```

